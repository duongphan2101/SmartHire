<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <style>
        /* --- CẤU HÌNH TRANG --- */
        @page {
            size: A4;
            margin: 0; 
        }
        body {
            font-family: {{settings.fontFamily}}, 'Arial', sans-serif;
            font-size: 13px;
            line-height: 1.4;
            color: #333;
            margin: 0;
            padding: 30px 40px; /* Padding chuẩn A4 */
            -webkit-print-color-adjust: exact;
        }

        /* --- GLOBAL --- */
        a { text-decoration: none; color: inherit; }
        .text-bold { font-weight: bold; }
        .italic { font-style: italic; }
        .uppercase { text-transform: uppercase; }
        
        /* Flexbox Helpers */
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .gap-1 { gap: 4px; }
        .gap-2 { gap: 8px; }
        .gap-3 { gap: 12px; }
        .wrap { flex-wrap: wrap; }

        /* --- HEADER --- */
        .header {
            text-align: center;
            margin-bottom: 15px;
        }
        .header-name {
            font-size: 28px;
            font-weight: bold;
            text-transform: uppercase;
            color: {{settings.color}};
            line-height: 1.2;
            margin-bottom: 5px;
        }
        .header-hr {
            border: none;
            height: 2px;
            background-color: {{settings.color}};
            width: 100%;
            margin: 8px 0;
        }
        .header-title {
            font-size: 16px;
            font-weight: 500;
            color: #555;
            text-transform: uppercase;
        }

        /* --- CONTACT --- */
        .contact-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            font-size: 12px;
            margin-bottom: 20px;
            color: #444;
        }
        .contact-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* --- SECTION HEADINGS --- */
        .section {
            margin-bottom: 15px;
            break-inside: avoid; /* Tránh header bị tách khỏi content */
        }
        .section-title {
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
            color: {{settings.color}};
            margin-bottom: 8px;
        }

        /* --- ENTRIES (Job, Project, Education) --- */
        .entry {
            margin-bottom: 10px;
            position: relative;
            break-inside: avoid; /* QUAN TRỌNG: Không cắt đôi 1 job */
        }
    

        .entry-header-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 2px;
        }
        
        .entry-title {
            font-weight: bold;
            font-size: 14px;
        }
        
        .entry-company {
            font-weight: normal;
        }

        .entry-date {
            font-size: 12px;
            font-style: italic;
            color: #666;
            white-space: nowrap;
        }

        .entry-description {
            text-align: justify;
            white-space: pre-wrap;
            margin-top: 2px;
        }

        /* --- EDUCATION SPECIFIC --- */
        .edu-row {
            display: flex;
            gap: 5px;
            margin-bottom: 2px;
        }
        .edu-label { font-weight: bold; min-width: 80px; }

        /* --- SKILLS (TAG STYLE) --- */
        .skill-group {
            display: flex;
            align-items: baseline;
            margin-bottom: 6px;
        }
        .skill-label {
            font-weight: bold;
            margin-right: 10px;
            min-width: 100px;
        }
        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            flex: 1;
        }
        .skill-tag {
            border-bottom: 1px solid {{settings.color}};
            padding: 0 2px;
            font-weight: 500;
            font-size: 13px;
        }

    </style>
    </head>
    <body>

        <div class="header">
            <div class="header-name">{{name}}</div>
            <div class="header-hr"></div>
            <div class="header-title">{{title}}</div>
        </div>

        <div class="contact-section">
            {{#if contact.email}}
            <div class="contact-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="{{settings.color}}" class="bi bi-threads"
                    viewBox="0 0 16 16">
                    <path
                        d="M6.321 6.016c-.27-.18-1.166-.802-1.166-.802.756-1.081 1.753-1.502 3.132-1.502.975 0 1.803.327 2.394.948s.928 1.509 1.005 2.644q.492.207.905.484c1.109.745 1.719 1.86 1.719 3.137 0 2.716-2.226 5.075-6.256 5.075C4.594 16 1 13.987 1 7.994 1 2.034 4.482 0 8.044 0 9.69 0 13.55.243 15 5.036l-1.36.353C12.516 1.974 10.163 1.43 8.006 1.43c-3.565 0-5.582 2.171-5.582 6.79 0 4.143 2.254 6.343 5.63 6.343 2.777 0 4.847-1.443 4.847-3.556 0-1.438-1.208-2.127-1.27-2.127-.236 1.234-.868 3.31-3.644 3.31-1.618 0-3.013-1.118-3.013-2.582 0-2.09 1.984-2.847 3.55-2.847.586 0 1.294.04 1.663.114 0-.637-.54-1.728-1.9-1.728-1.25 0-1.566.405-1.967.868ZM8.716 8.19c-2.04 0-2.304.87-2.304 1.416 0 .878 1.043 1.168 1.6 1.168 1.02 0 2.067-.282 2.232-2.423a6.2 6.2 0 0 0-1.528-.161" />
                </svg>
                {{contact.email}}
            </div>
            {{/if}}

            {{#if contact.phone}}
            <div class="contact-item">

                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="{{settings.color}}" class="bi bi-telephone-fill"
                    viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                </svg>
                {{contact.phone}}
            </div>
            {{/if}}

            {{#if contact.address}}
            <div class="contact-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="{{settings.color}}" class="bi bi-geo-fill"
                    viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.3 1.3 0 0 0-.37.265.3.3 0 0 0-.057.09V14l.002.008.016.033a.6.6 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.6.6 0 0 0 .146-.15l.015-.033L12 14v-.004a.3.3 0 0 0-.057-.09 1.3 1.3 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465s-2.462-.172-3.34-.465c-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411" />
                </svg>
                {{contact.address}}
            </div>
            {{/if}}

            {{#if contact.website}}
            <div class="contact-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="{{settings.color}}" class="bi bi-link-45deg"
                    viewBox="0 0 16 16">
                    <path
                        d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z" />
                    <path
                        d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z" />
                </svg>
                {{contact.website}}
            </div>
            {{/if}}

            {{#if contact.github}}
            <div class="contact-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="{{settings.color}}" class="bi bi-link-45deg"
                    viewBox="0 0 16 16">
                    <path
                        d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z" />
                    <path
                        d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z" />
                </svg>
                {{contact.github}}
            </div>
            {{/if}}
        </div>

        {{#each orderedSections}}

        {{#if (eq type 'SUMMARY')}}
        <div class="section">
            <div class="section-title">{{title}}</div>
            <div class="entry-description">{{content}}</div>
        </div>
        {{/if}}

        {{#if (eq type 'EXPERIENCE')}}
        <div class="section">
            <div class="section-title">{{title}}</div>
            {{#each items}}
            <div class="entry border-left-accent">
                <div class="entry-header-row">
                    <div class="entry-title">
                        {{this.jobTitle}} 
                        <span style="font-weight:normal">{{../i18n.AT}}</span>
                        {{this.company}}
                    </div>
                </div>
                <div class="entry-date">
                    {{this.startDate}} - {{this.endDate}}
                </div>
                <div class="entry-description">{{this.description}}</div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{#if (eq type 'PROJECTS')}}
        <div class="section">
            <div class="section-title">{{title}}</div>
            {{#each items}}
            <div class="entry border-left-accent">
                <div class="entry-title">{{this.projectName}}</div>
                <div class="entry-description">{{this.projectDescription}}</div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{#if (eq type 'EDUCATION')}}
        <div class="section">
            <div class="section-title">{{title}}</div>
            {{#each items}}
            <div class="entry">
                <div class="edu-row">
                    <span class="edu-label">{{../../i18n.UNIVERSITY}}</span>
                    <span>{{this.university}}</span>
                </div>
                <div class="edu-row">
                    <span class="edu-label">{{../../i18n.MAJOR}}</span>
                    <span>{{this.major}}</span>
                </div>
                <div class="edu-row">
                    <span class="edu-label">{{../../i18n.TIME}}</span>
                    <span>{{this.startYear}} - {{this.endYear}}</span>
                </div>
                {{#if this.gpa}}
                <div class="edu-row">
                    <span class="edu-label">{{../../i18n.GPA}}</span>
                    <span>{{this.gpa}}</span>
                </div>
                {{/if}}
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{#if (eq type 'SKILLS')}}
        <div class="section">
            <div class="section-title">{{title}}</div>

            {{#if profSkillsArray}}
            <div class="skill-group">
                <div class="skill-label">{{../i18n.PROF_SKILLS}}</div>
                <div class="skill-tags">
                    {{#each profSkillsArray}}
                    <span class="skill-tag">{{this}}</span>
                    {{/each}}
                </div>
            </div>
            {{/if}}

            {{#if softSkillsArray}}
            <div class="skill-group">
                <div class="skill-label">{{../i18n.SOFT_SKILLS}}</div>
                <div class="skill-tags">
                    {{#each softSkillsArray}}
                    <span class="skill-tag">{{this}}</span>
                    {{/each}}
                </div>
            </div>
            {{/if}}
        </div>
        {{/if}}

        {{#if (eq type 'ACTIVITIES')}}
        <div class="section">
            <div class="section-title">{{title}}</div>
            <div class="entry-description">{{content}}</div>
        </div>
        {{/if}}

        {{/each}}

    </body>
</html>